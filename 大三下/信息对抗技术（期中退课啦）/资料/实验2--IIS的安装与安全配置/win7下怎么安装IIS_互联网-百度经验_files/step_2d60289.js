define("step:widget/ads/brand-ads/brand-ads.js",function(a,e,n){var t=a("common:widget/lib/tangram/base/base.js");n.exports.init=function(a){var e=[];e.push("type=brand_ad"),e.push("page=album"),e.push("aid="+a),e.push("eidenc="+F.context("eid")),e.push("t="+1*new Date);var n=t.dom.query(".brand-pro-wrap a"),i="/static/article/ui/log/log.gif";t.each(n,function(a,n){t.on(a,"click",function(){var a=document.createElement("img");a.src=i+"?"+e.join("&"),window["___article_brand_"+1*new Date+n]=a})})}});
;define("step:widget/content/content.js",function(e,n,t){e("common:widget/lib/tangram/base/base.js"),e("common:widget/lib/fis/event/event.js").eventCenter;t.exports.init=function(){}});
;define("step:widget/header/header.js",function(e,n){function i(){s.dom.setStyle(m,"display","inline-block")}function o(){s.dom.setStyle(m,"display","none")}function t(){return l(".header").css("height","92px"),l(".close-icon").on("click",function(){l(".header").css("height","60px"),l(".warning-warpper").hide()}),window.onload=function(){if("performance"in window&&"timing"in window.performance&&"navigation"in window.performance){var e=window.performance.timing,n=e.responseEnd-e.requestStart,i=Math.floor(10*Math.random());1===i&&p.send(location.href,2016,{module:"step",page:"index",requestTime:n,BFEType:F.context("BFEType")})}else;},"undefined"==typeof Audio?1:(r=new u({onplay:function(){s.dom.addClass(m,"playing")},onpause:function(){s.dom.removeClass(m,"playing")}}),s.on(m,"click",function(){if(!r.paused)return r.pause(),p.send(location.href,2016,{module:"step",page:"index",pos:"audio-pause",action:"click"}),1;var e="",n=l(".step-item-container").eq(d);if(n.length){e=n[0].innerText;var i=n.find(".step-item-header");i.length&&(e=l.trim(e).replace(/^(\d+)\/\d+/,"$1"))}r.changeText(e),r.play(),p.send(location.href,2016,{module:"step",page:"index",pos:"audio-play",action:"click"})}),void c.on("step/flip",function(e,n){d=n.currentStepIndex,a=n.totalStep,r.pause(),a-1>d&&d>0?i():o()}))}var a,d,r,s=e("common:widget/lib/tangram/base/base.js"),c=e("common:widget/lib/fis/event/event.js").eventCenter,p=e("common:widget/ui/log/log.js"),l=e("common-jquery:widget/lib/jquery/jquery.js"),u=e("common-jquery:widget/js/logic/text2audio/text2audio.es").Text2Audio,m=s.dom.query("#exp-title .audio-wp")[0];n.init=t});
;define("step:widget/mooncake/mooncake.js",function(require,exports,module){var $=require("common-jquery:widget/lib/jquery/jquery.js"),bt=require("common-jquery:widget/js/util/template/template.js"),prizeTpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="dialog-bg">    <span class="sun"></span>    <span class="close-icon"></span>    <span class="wuren"></span>    <span class="suixie"></span>    <span class="caidai"></span>    <span class="tooltip"></span>    <p class="info">        <span class="highlight">恭喜中奖</span>，        <span class="text">留下您手机号，我们火速联系为您颁奖。</span>        <span class="num">手机号：</span>           <input type="text" placeholder="请输入手机号" class="ipt">        <span class="btn">提交</span>    </p>    <div class="bottom-block">        <div class="left">            <h1>活动规则<span class="sanjiao-icon"></span></h1>            <ul>                当幸运的你拿到“至尊五仁月饼”时，就可以获得我们为您精心准备的中秋礼品。同志们，经验浏览多，中奖机会大，把握此刻中秋，大奖等你来拿！！！            </ul>        </div>        <div class="right">            <h1>中秋经验大放送<span class="sanjiao-icon"></span></h1>            <ul>                ');for(var i=0;length>i;i++)_template_fun_array.push('                    <li>                        <span class="yuan-icon"></span>                        <a target="_blank" href="',"undefined"==typeof tempExpShow[i].href?"":baidu.template._encodeHTML(tempExpShow[i].href),'">',"undefined"==typeof tempExpShow[i].title?"":baidu.template._encodeHTML(tempExpShow[i].title),"</a>                    </li>                ");_template_fun_array.push("            </ul>        </div>    </div></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],noprizeTpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="dialog-bg">    <span class="sun"></span>    <span class="close-icon"></span>    '),_template_fun_array.push(0==random?'        <span class="hongdou"></span>        <div class="rules" style="margin-top: 70px;">    ':1==random?'        <span class="fruit"></span>        <div class="rules" style="margin-top: 70px;">    ':2==random?'        <span class="lianrong"></span>        <div class="rules" style="margin-top: 30px;">    ':'        <span class="icecream"></span>        <div class="rules" style="margin-top: 54px;">    '),_template_fun_array.push('            <h1>活动规则<span class="sanjiao-icon"></span></h1>        当幸运的你拿到<span class="green">“至尊五仁月饼”</span>时，就可以获得我们为您精心准备的中秋礼品，同志们，经验浏览多，中奖机会大，把握此刻中秋，大奖等你来拿！！！    </div>    <div class="bottom-block1">        <h1 class="green">中秋经验大放送<span class="sanjiao-icon"></span></h1>        <ul>            ');for(var i=0;2>i;i++)_template_fun_array.push('                <li>                    <span class="yuan-icon"></span>                    <a target="_blank" href="',"undefined"==typeof tempExpShow[i].href?"":baidu.template._encodeHTML(tempExpShow[i].href),'">',"undefined"==typeof tempExpShow[i].title?"":baidu.template._encodeHTML(tempExpShow[i].title),"</a>                </li>            ");_template_fun_array.push("        </ul>        <ul>            ");for(var i=2;4>i;i++)_template_fun_array.push('                <li>                    <span class="yuan-icon"></span>                    <a target="_blank" href="',"undefined"==typeof tempExpShow[i].href?"":baidu.template._encodeHTML(tempExpShow[i].href),'">',"undefined"==typeof tempExpShow[i].title?"":baidu.template._encodeHTML(tempExpShow[i].title),"</a>                </li>            ");_template_fun_array.push("        </ul>    </div></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],As={init:function(){var a=$(".mooncake-superman1"),t=$(".mooncake-block"),e=(t.offset().top+20,$(window).height(),$(document).height()),i=!1,n=function(a){var t="";switch(+a){case 1:t="网络错误";break;case 2003:t="未登录";break;case 2044:t="未登录";break;case 2046:t="手机号不合法";break;default:t="发生网络错误，请稍后重试~"}return t},l=[{title:"中秋购买月饼要注意什么？",href:"http://jingyan.baidu.com/article/90808022e927ccfd91c80fa7.html"},{title:"中秋佳节如何做好吃的菜肴",href:"http://jingyan.baidu.com/article/59703552d712948fc007402b.html"},{title:"中秋节手工——怎样制作纸灯笼",href:"http://jingyan.baidu.com/article/ed2a5d1f25e3e509f6be1716.html"},{title:"中秋之际―紫薯月饼",href:"http://jingyan.baidu.com/article/fedf073765e10635ac8977a4.html"},{title:"中秋节吃什么-美味的芝香排骨做节日餐",href:"http://jingyan.baidu.com/article/a17d52855aabb98099c8f274.html"},{title:"怎样在中秋沐浴祈福获得爱情?",href:"http://jingyan.baidu.com/article/d169e186824d00436611d8b9.html"},{title:"【中秋节】手工制作孔明灯方法",href:"http://jingyan.baidu.com/article/fedf073718f71b35ac8977b6.html"},{title:"怎样做中秋祈福莲花灯?",href:"http://jingyan.baidu.com/article/4d58d541eef88e9dd4e9c085.html"},{title:"怎样DIY不织布月饼送好友过中秋",href:"http://jingyan.baidu.com/article/95c9d20df3eb6fec4e756183.html"},{title:"中秋将至,如何拍摄唯美的满月照",href:"http://jingyan.baidu.com/article/90895e0fb87d5064ec6b0b9c.html"},{title:"中秋送礼方案",href:"http://jingyan.baidu.com/article/f7ff0bfc49ec612e26bb1393.html"},{title:"中秋节怎样挑选旅游地",href:"http://jingyan.baidu.com/article/046a7b3e139775f9c27fa993.html"},{title:"亚洲各国中秋节不同习俗攻略",href:"http://jingyan.baidu.com/article/c14654136083f70bfcfc4c92.html"},{title:"教你用ps制作中秋贺卡!",href:"http://jingyan.baidu.com/article/92255446f1bd4f851648f492.html"},{title:"【中秋节】莲蓉月饼做法详细图解",href:"http://jingyan.baidu.com/article/19192ad851754ae53e570791.html"},{title:"中秋佳节到了,如何挑选月饼?",href:"http://jingyan.baidu.com/article/e4511cf3452ef02b845eafb4.html"},{title:"中秋节,如何欢度才尽兴?",href:"http://jingyan.baidu.com/article/f79b7cb3158a389144023eb3.html"},{title:"中秋佳节如何做好吃的菜肴",href:"http://jingyan.baidu.com/article/59703552d712948fc007402b.html"},{title:"中秋佳节做什么比较好?",href:"http://jingyan.baidu.com/article/54b6b9c0ede41a2d583b472b.html"},{title:"中秋节送什么礼品好呢",href:"http://jingyan.baidu.com/article/a24b33cd1932ce19fe002b20.html"},{title:"中秋这个季节,你会想喝哪种茶?【经典之作】",href:"http://jingyan.baidu.com/article/414eccf6434ab26b431f0a3f.html"},{title:"中秋节月饼的健康吃法?",href:"http://jingyan.baidu.com/article/ac6a9a5e0c2a5b2b653eac0f.html"},{title:"中秋节公司可以开展的企业文化活动",href:"http://jingyan.baidu.com/article/75ab0bcbbf3f34d6864db230.html"},{title:"中秋节如何发有身价的礼品",href:"http://jingyan.baidu.com/article/5bbb5a1b064d6f13eba1790e.html"},{title:"中秋节选择什么礼品送客户比较合适",href:"http://jingyan.baidu.com/article/6181c3e0b36676152ef1531a.html"},{title:"2016中秋节送礼三个不能选",href:"http://jingyan.baidu.com/article/3aed632e305df170108091e7.html"},{title:"2016中秋节怎么放假",href:"http://jingyan.baidu.com/article/2c8c281da168a30008252ae2.html"},{title:"致中秋:我们为什么要送礼? ",href:"http://jingyan.baidu.com/article/08b6a591b96f8714a80922e2.html"},{title:"世界各地过中秋",href:"http://jingyan.baidu.com/article/4b52d702a5e3a0fc5d774b79.html"},{title:"2016中秋送礼,健康时尚成新趋势",href:"http://jingyan.baidu.com/article/48b558e3207abb7f38c09af0.html"},{title:"PS教大家设计制作中秋节海报",href:"http://jingyan.baidu.com/article/948f59241a0569d80ff5f9ce.html"},{title:"中秋节的习俗与文化",href:"http://jingyan.baidu.com/article/c45ad29c235522051753e2db.html"},{title:"中秋节有什么好玩的活动游戏呢?",href:"http://jingyan.baidu.com/article/93f9803f369a80e0e46f55cb.html"},{title:"中秋节要做哪些重要的事?",href:"http://jingyan.baidu.com/article/a3a3f811d8f03c8da2eb8a14.html"},{title:"中秋国庆双节临近,盘点抢票五大实用攻略",href:"http://jingyan.baidu.com/article/a948d651178aff0a2ccd2e52.html"},{title:"2016中秋节礼品采购方案及礼品推荐",href:"http://jingyan.baidu.com/article/49711c617c7306fa441b7ca3.html"},{title:"2016中秋节送什么礼好?——中秋送礼大全.",href:"http://jingyan.baidu.com/article/20b68a88a6956b796cec6289.html"},{title:"中秋临近,教大家一款月饼的做法",href:"http://jingyan.baidu.com/article/6181c3e0bd6374152ef1531d.html"},{title:"中秋吃月饼的禁忌",href:"http://jingyan.baidu.com/article/ed2a5d1f60fea009f6be1709.html"},{title:"中秋自制美味--枣泥月饼",href:"http://jingyan.baidu.com/article/295430f1fb1a9f0c7e0050cb.html"}],c={BdStoken:F.context("BdStoken"),bdstt:F.context("bdstt")};a.on("click",function(){"none"!==a.css("display")&&$.post("/submit/activity?method=midAutumnLottery",c,function(a){a.errno?alert(n(a.errno)):(i=1===a.data.won?!0:!1,p())})});var r=function(a){for(var t=[],e=0;a>e;e++){var i=Math.ceil(39*Math.random());t.indexOf(i)>-1?e--:t.push(i)}return t},p=function(){var a=$("body"),t='<div class="mask-mooncake" style="height: '+e+'px"></div>',p=r(4),s=[];if(s.push(l[p[0]],l[p[1]],l[p[2]],l[p[3]]),a.append(t),i){var h={length:s.length,tempExpShow:s};a.append(prizeTpl(h));var o=$(".suixie");o.addClass("flash"),$(".btn").on("click",function(){var a=$(".ipt").val(),t=/^1\d{10}$/;return t.test(a)?(c=$.extend(c,{mobile:a}),void $.post("/submit/activity?method=midAutumnFillPhoneNumber",c,function(a){a.errno?alert(n(a.errno)):$(".info").html("提交成功")})):void alert("请输入有效手机号")})}else{var m={random:Math.floor(3*Math.random()),tempExpShow:s};a.append(noprizeTpl(m))}$(".close-icon").on("click",function(){$(".mask-mooncake").hide(),$(".dialog-bg").remove();var a=$(".suixie");1===a.length&&$eleSuixie.removeClass("flash")})}}};module.exports=As});
;define("step:widget/pager/pager.js",function(e,t,o){var n=e("common-jquery:widget/lib/jquery/jquery.js"),r=e("common:widget/lib/tangram/base/base.js"),i=e("common:widget/lib/fis/event/event.js").eventCenter,a=e("common:widget/ui/log/log.js");o.exports=function(){var e=12,t=r.q("steppager-item"),o=r.q("step"),c=0,s=0,l=0,d=0,m=0,p=!1,g={},h=!1,u=function(){for(var o=0,n=t.length;n>o;o++)r.dom.setStyle(t[o],"display","none");for(var i=Math.min(m+e,t.length),o=m;i>o;o++)r.dom.setStyle(t[o],"display","block")},f=function(){r.array.each(o,function(e,t){var o=e.children[0];if(r.dom.hasClass(o,"preview")){var n,i=r.dom.create("p",{"class":"preview-data"}),a=r.dom.create("div",{"class":"triangle-icon"}),c=r.dom.getAttr(o,"data"),s=r.dom.getAttr(o,"data-type");0===+s?i.innerHTML=c:1===+s&&(n='<img src="'+c+'" width="80px" height="60px">',r.dom.insertHTML(i,"afterBegin",n),r.dom.addClass(i,"preview-img")),r.on(o,"mouseover",function(){r.dom.insertAfter(i,o),r.dom.insertAfter(a,o)}),r.on(o,"mouseout",function(){r.dom.remove(i),r.dom.remove(a)})}r.on(o,"click",function(){l!==t&&v(t)})}),r.g("pre")&&r.on("pre","click",function(){m>0&&(m=Math.max(m-e,0),u())}),r.g("next")&&r.on("next","click",function(){m+e<t.length&&(m=Math.min(m+e,t.length-e),u())}),i.on("stepPlay.left",function(){v(l-1)}),i.on("stepPlay.right",function(){v(l+1)}),r.on(document,"keydown",function(e){var t=e||window.event;r.event.stopPropagation(t),37===t.keyCode&&(g.keyboard_left=1,i.fire("stepPlay.left")),39===t.keyCode&&(g.keyboard_right=1,i.fire("stepPlay.right"))});var n=r.browser.firefox,a=n?"DOMMouseScroll":"mousewheel";r.on("body",a,function(e){r.event.preventDefault(e);var t=r.event.getTarget(e),o=r.dom.query("#step-item-"+l+" .tangram-scrollpanel-main");if(!(o.length>0&&r.dom.contains(o[0],t))){var n=r.event.get(e),a=n.detail?-n.detail:n.wheelDelta;0>a?(g.mousewheel_forward=1,i.fire("stepPlay.right")):(g.mousewheel_backward=1,i.fire("stepPlay.left"))}}),r.on("left-cover","mouseover",function(e){r.event.stopPropagation(e),r.dom.addClass("left-cover","cover-hover")}),r.on("left-cover","mouseout",function(e){r.event.stopPropagation(e),r.dom.removeClass("left-cover","cover-hover")}),r.on("left-cover","click",function(e){r.event.stopPropagation(e),g.left_btn_click=1,i.fire("stepPlay.left")}),r.on("right-cover","mouseover",function(e){r.event.stopPropagation(e),r.dom.addClass("right-cover","cover-hover")}),r.on("right-cover","mouseout",function(e){r.event.stopPropagation(e),r.dom.removeClass("right-cover","cover-hover")}),r.on("right-cover","click",function(e){r.event.stopPropagation(e),g.right_btn_click=1,i.fire("stepPlay.right")})},v=function(e,t){e===c-2&&n(".wgt-step-mooncake").show(),0>e||e>=c||p||(p=!0,y(e),w(e),k(e),t?(imgplusArray=r.lang.toArray(r.dom.query(".step-img-wrapper",r.g("step-item-"+e))),g.page_show=1):(g.page_request=1,g.cid=F.context("cid")),a.send(location.href,F.context("typeId"),g),g={},l=e,i.fire("step/flip",{currentStepIndex:l,totalStep:c}),a.send(window.location.href,F.context("typeId"),{module:"step",page:"index",pos:"play-list",cur:l,last:l===c-1?1:0,action:"flip"}),l===c-1&&n(".recommand-zhidao").length&&(a.send(window.location.href,F.context("typeId"),{module:"step",page:"index",pos:"relate-exp-zhidao",action:"show"}),n(".recommand-zhidao a").on("click",function(){a.send(window.location.href,F.context("typeId"),{module:"step",page:"index",pos:"relate-exp-zhidao",action:"click"})})))},y=function(n){r.q("current")[0]&&r.dom.removeClass(r.q("current")[0],"current"),r.dom.addClass(r.dom.children(o[n])[0],"current");var i=r.array.indexOf(t,o[n]),a=i-m;if(a>=0){if(e>a)return;for(;i>=m+e;)m=Math.min(m+e,t.length-e)}else do m=Math.max(m-e,0);while(m>i);u()},w=function(e){var t=920*(e-l),o=920*l,n=20,i=20,a=20,c=setInterval(function(){o+=t/n,r.dom.setStyle("step-play-list","left",-o),--i||(clearInterval(c),p=!1)},a)},x=function(e){if(e===c-1&&!h)return _(),void(h=!0);{var t=r.dom.query(".step-img-wrapper",r.g("step-item-"+e));r.dom.query(".step-img-wrapper",r.g("step-item-"+(e-1)))}r.array.each(t,function(t){var o=r.dom.getAttr(t,"imgLoaded");if("0"===o){r.dom.setAttr(t,"imgLoaded",1);for(var n=r.dom.query("img",t)[0],a=r.dom.query("img",t),c=(r.dom.query(".step-img-wrapper",r.g("step-item-"+(e-1))),0);c<a.length;c++)n=a[c],b(n,r.dom.getAttr(n,"data-src"),function(e){var t=a[e.index];r.dom.setAttr(e.item,"imgLoaded",2),r.dom.setAttr(t,"_height",parseInt(t.height)),r.dom.setAttr(t,"_width",parseInt(t.width));for(var o=(r.dom.query(".img-cover",e.item),r.dom.query(".inner-img-cover",e.item)),n=0;n<o.length;n++){var c=o[n];r.dom.setStyles(c,{height:"100%",width:"100%"})}i.fire("adjustSingleImg",{container:e.item,resizedContainerHeight:r.dom.getStyle(e.item,"height")})},{item:t,img:n,index:c})}})},k=function(e){x(e,"flag"),c-1>e?(x(e+1),r.show("right-cover")):r.hide("right-cover"),0===e?r.hide("left-cover"):(x(e-1),r.show("left-cover"))},q=function(e,t,o){var n=new Image;n.onload=function(){var r=this.width,i=this.height,a=0,c=0;r/i>=t/o?(i=t/r*i,r=t,a=(o-i)/2):(r=o/i*r,i=o,c=(t-r)/2),e.style.left=c+"px",e.style.top=a+"px",e.style.width=r+"px",e.style.height=i+"px",n.onload=null,n=null},n.src=e.src},_=function(){r.ajax.get("/asyncreq?method=getRecommand&eidEnc="+F.context("eid"),function(e,t){var o=r.json.parse(t);if(0===o.errno){var i=o.data.recommendExpList;if(!i)return;var c=0,s=Math.min(i.length,5),l=[],d=null;for(l.push("<h3>你可能对这些经验也感兴趣</h3>");s>c;c++)d=i[c],l.push('<div class="recommend-exp '+(c===s-1?" last":"")+'">'),l.push('<div class="recommend-exp-image">'),l.push('<a class="recommend-exp-link" href="/album/'+d.eidEnc+'.html" target="_self">'),l.push('<img class="recommand-img" alt="'+d.title+'" src="'+F.context("hi")+d.picEnc+'.jpg" width="120px" height="90px">'),l.push('<div class="img-border"></div>'),l.push("</a>"),l.push("</div>"),l.push('<a class="recommend-exp-title" href="/album/'+d.eidEnc+'.html" target="_self" title="'+d.title+'">'+d.title+"</a>"),l.push("</div>");n("#recommend-list-container").prepend(l.join("")),r.array.each(r.g("recommend-list-container").getElementsByTagName("img"),function(e){q(e,120,90)}),r.array.each(r.dom.query(".recommand-list .recommend-exp"),function(e){r.un(e,"click"),r.on(e,"click",function(){a.send(window.location.href,F.context("typeId"),{module:"step",page:"index",pos:"step_end_article",action:"click"})})})}}),r.on("replay-step","click",function(e){r.event.preventDefault(e),g.reread_btn_click=1,v(0)}),r.on("replay-step-e","click",function(e){r.event.preventDefault(e),g.reread_btn_click=1,v(0)});var e=r.dom.query(".replay-img .recommand-img")[0],t=r.dom.getAttr(e,"data-src");e.src=t};i.on("step/flip",function(e,t){var o=t.currentStepIndex,r=t.totalStep;o===r-2?n(".mooncake-superman1").show():n(".mooncake-superman1").hide()});var b=function(e,t,o,n){e||(e=new Image),e.onload=function(){o&&o(n),e.onload=null},e.src=t};return{init:function(n){return o.length<2?!1:(c=o.length,s=Math.ceil(t.length/e),l=n,d=parseInt(r.array.indexOf(t,o[n])/e,10)+1,m=(d-1)*e,u(),t.length<=e&&r.dom.setStyle("step-pager-list","width",40*t.length+40),f(),void v(n,1))}}}()});
;define("step:widget/step-item/step-img-wrapper/carousel.js",function(require,exports,module){var T=require("common:widget/lib/tangram/base/base.js"),Carousel=require("common-jquery:widget/js/ui/carousel/carousel.js"),bt=require("common-jquery:widget/js/util/template/template.js"),$=require("common-jquery:widget/lib/jquery/jquery.js"),carouselTpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="img-cover">        <div class="inner-img-cover" data-src="',"undefined"==typeof items.src?"":baidu.template._encodeHTML(items.src),'" ></div>        <img src="',"undefined"==typeof loadImgUrl?"":baidu.template._encodeHTML(loadImgUrl),'" data-src="',"undefined"==typeof items.url?"":baidu.template._encodeHTML(items.url),'" /></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0];module.exports.init=function(e,t,a){var r=t.length>1?!0:!1,i=[];$.each(t,function(e,t){i.push(carouselTpl({items:t,loadImgUrl:a}))});var n=new Carousel({items:i,direction:"horizontal",controls:r,viewSize:1,indicators:r,interval:0,duration:600,activeIndex:0,render:function(){},afterSlide:function(){},beforeSlide:function(){}});n.render($("#textSlider-"+e))}});
;define("step:widget/ui/scrollbar/scrollbar.js",function(l,r,e){var o=l("common:widget/lib/tangram/ui/ScrollPanel/ScrollPanel.js");e.exports=o});
;define("step:widget/ui/adjust-size/adjust-size.js",function(e,t,i){var r=e("common:widget/lib/tangram/base/base.js"),o=e("common:widget/lib/fis/event/event.js").eventCenter,h=e("step:widget/ui/scrollbar/scrollbar.js");i.exports=function(){var e=600,t=1024,i=130,a=920,g=16,d=480,n={"brief-text-area":{height:330,width:325,spaceHeight:0},"img-text-area":{height:390,width:270,spaceHeight:52},"img-text-area-withhead":{height:390,width:270,spaceHeight:107}},s={"brief-info-img":{width:200,height:330},"step-only-img":{width:450,height:325},"step-one-img":{width:480,height:346},"step-many-img":{width:480,height:346},"step-two-img":{width:480,height:167},"step-three-img-top":{width:235,height:176},"step-three-img-bottom":{width:480,height:155}},m={},l=function(t){var o=t.ph,a=o/(e-i),g=r.q("step-text-wrapper");if(null==g||0===g.length)return!1;r.array.each(g,function(e){var t=r.dom.getAttr(e,"texttype");if(t){var i=Math.max(e.offsetHeight,e.scrollHeight),o=n[t];if(i<o.height){if("brief-text-area"===t){var g=(o.height*a-i)/2;r.dom.setStyles(e,{position:"absolute",top:g}),r.dom.setStyle("brief-left-quote","top",g),r.dom.setStyle("brief-right-quote","bottom",o.height*a-i-g)}}else{var d=r.dom.getAttr(e,"id");if(r.dom.setStyle(e,"height",o.height*a-o.spaceHeight),m[d])m[d].update({container:d,element:d,overflow:"overflow-y"});else{var s=new h({container:d,element:d,overflow:"overflow-y"});s.render(d),m[d]=s}}}});var d=r.q("step-item-text-inner");if(null==d||0===d.length)return!1;var s=r.page.getViewHeight();r.array.each(d,function(e){var t=r.dom.query(".smaller-text-left",e)[0],i=r.dom.query(".bigger-text-left",e)[0],o=r.dom.query(".smaller-text-right",e),a=r.dom.query(".bigger-text-right",e);if(o.length>0){var g=o[0];if(g.offsetHeight>336&&!r.dom.hasAttr(g,"hasLoaded")){var d=r.dom.getAttr(g,"id");r.dom.setStyle(g,"height",336);var n=new h({container:d,element:d,overflow:"overflow-y"});n.render(d),m[d]=n,r.dom.setAttr(g,"hasLoaded",1)}}if(a.length>0){var l=a[0];if(l.offsetHeight>448&&!r.dom.hasAttr(l,"hasLoaded")){var d=r.dom.getAttr(l,"id");r.dom.setStyle(l,"height",448);var n=new h({container:d,element:d,overflow:"overflow-y"});n.render(d),m[d]=n,r.dom.setAttr(l,"hasLoaded",1)}}if(s>700){r.hide(t),r.show(i);var f=r.dom.query(".step-smaller-text-right-contanier",e),y=r.dom.query(".step-bigger-text-right-contanier",e);f.length>0&&r.hide(f[0]),y.length>0&&r.show(y[0])}else{r.show(t),r.hide(i);var f=r.dom.query(".step-smaller-text-right-contanier",e),y=r.dom.query(".step-bigger-text-right-contanier",e);f.length>0&&r.show(f[0]),y.length>0&&r.hide(y[0])}})},f=function(e){var t=e.container,i=parseInt(e.resizedContainerHeight,10),o=r.dom.getAttr(t,"stepType"),h=r.dom.query("img",t)[0],a=r.dom.query("img",t),g=r.dom.query(".img-cover",t)[0],n=r.dom.query(".img-cover",t),m=r.dom.query(".inner-img-cover",t),l=r.dom.query(".carousel-control",t),f=r.dom.query(".item",t),y=r.dom.getAttr(h,"_height"),p=r.dom.getAttr(h,"_width"),u=r.dom.getAttr(h,"_height");u=u&&346>u?346:u;var w=p/y;if(i-=50,"brief-info-img"!==o&&"brief-info-img"!==o&&"step-one-img"!==o){for(var c=0;c<a.length;c++){y=r.dom.getAttr(a[c],"_height"),p=r.dom.getAttr(a[c],"_width"),w=p/y;var v=d,b=i,S=b*w,x=v/w;S=S>v?v:S,x=x>b?b:x,r.dom.setStyles(n[c],{height:x,width:S}),r.dom.setStyle(m[c],"margin","-5px auto"),r.dom.setStyles(a[c],{height:x,width:S,margin:"-5px auto"})}r.array.each(f,function(e){r.dom.setStyles(e,{height:"100%"})}),r.array.each(l,function(e){r.dom.setStyle(e,"height",i+50)})}if(("brief-info-img"===o||"brief-info-img"===o)&&r.dom.setStyles(g,{height:h.height,width:h.width,"margin-top":(i-y)/2,left:(s[o].width-r.dom.getAttr(h,"_width"))/2}),"step-one-img"===o){var v=d,b=i,S=b*w,x=v/w;S=S>v?v:S,x=x>b?b:x,r.dom.setStyles(h,{height:x,width:S,margin:"0 auto"}),r.dom.setStyles(g,{height:h.height,width:h.width,margin:"0 auto"})}},y=function(t){var h=t.ph,a=h/(e-i),g=r.q("step-img-wrapper");return null==g||0===g.length?!1:void r.array.each(g,function(e){var t=r.dom.getAttr(e,"stepType");if(t){var i=s[t].height*a;r.dom.setStyle(e,"height",i);var h=r.dom.getAttr(e,"imgLoaded");2===+h&&o.fire("adjustSingleImg",{container:e,resizedContainerHeight:i})}})},p=function(t){var o=t.ph,h=t.pw,d=0,n=(h-(a+g))/2;r.dom.setStyle("body","height",o),r.dom.setStyles("left-cover",{height:o,width:n}),r.dom.setStyles("right-cover",{height:o,width:n+g}),r.dom.setStyle("step-play-container","left",n),r.g("brief-writer-info")&&r.dom.setStyle("brief-writer-info","height",469*o/(e-i)),r.g("brief-right-quote")&&r.dom.setStyle("brief-right-quote","display","block"),d=h>=1140?n:110,r.dom.setStyle("exp-title","left",d);var s=parseInt(r.dom.getCurrentStyle("step-search-form","width"),10),m=r.g("exp-title").offsetWidth,l=parseInt(r.dom.getCurrentStyle("keyword","width"),10),f="",y=m+d,p=h-150-y;350>p?(f=y+20,l=p-100,s=p):(l=250,f=h-150-330,s=330),r.dom.setStyle("step-search-form","left",f),r.dom.setStyle("step-search-form","width",s),r.dom.setStyle("keyword","width",l)};return{init:function(e){r.object.extend(n,e),o.on("adjustSize",function(e){p(e),l(e),y(e)}),o.on("adjustSingleImg",function(e){f(e)}),r.dom.setStyle("step-search-form","display","block"),r.on("step-search-form","submit",function(e){""===r.trim(r.g("keyword").value)?window.location.reload(!0):this.submit(),r.event.preventDefault(e)})},resize:function(h){var a=r.page.getViewHeight(),g=r.page.getViewWidth();a=Math.max(a,e)-i,g=Math.max(g,t),(a>e-i||g>t||h)&&o.fire("adjustSize",{ph:a,pw:g})}}}()});
;define("step:widget/ui/brand-ads/brand-ads.js",function(a,e,n){var t=a("common:widget/lib/tangram/base/base.js");n.exports.init=function(a){var e=t.dom.query(".brand-pro-wrap a"),n="/static/article/ui/log/log.gif";t.each(e,function(e){t.on(e,"click",function(){var e=[];e.push("type=brand_ad"),e.push("page=album"),e.push("aid="+a),e.push("eidenc="+F.context("eid"));var t=Math.round((new Date).getTime()/1e3);e.push("t="+t);var i=document.createElement("img");i.src=n+"?"+e.join("&"),window["___article_brand_"+1*new Date]=i})})}});
;define("step:widget/ui/step-album/step-album.js",function(t,e,i){var n=t("common:widget/lib/tangram/base/base.js"),s=t("common:widget/ui/album/album.js");i.exports.init=function(){n.on("step-play-list","click",function(t){n.event.stopPropagation(t);var e=n.event.getTarget(t);if(n.dom.hasClass(e,"inner-img-cover")){for(var i=n.dom.getAttr(e,"data-src"),a=F.context("stepPic").stepPic,o=0,c=a.length;c>o&&!(a[o].src.indexOf(i)>-1);o++);s.initAlbum(o,F.context("stepPic"))}})}});
;define("step:widget/ui/user-guide/user-guide.js",function(e,t,i){var d=e("common:widget/lib/tangram/base/base.js");e("common:widget/lib/tangram/fx/fadeOut/fadeOut.js"),i.exports={init:function(){if(d.cookie.get("isStepGuided"))return!1;var e=d.dom.create("div",{"class":"guide-container"});e.innerHTML='<img src="//exp.bdstatic.com/static/step/widget/img/user-guide_083b4c4.gif">';var t=d.g("step-play-container");t.appendChild(e),d.dom.setStyle(e,"top",(t.offsetHeight-220)/2),setTimeout(function(){d.fx.fadeOut(e),d.cookie.set("isStepGuided","done",{path:"/"})},2e3)}}});
;define("step:widget/ui/vote-favor/vote-favor.js",function(e,t,i){var a=e("common:widget/lib/tangram/base/base.js"),n=e("common:widget/ui/dialog/dialog.js"),o=e("common:widget/ui/favor/favor.js"),s=(e("common:widget/ui/error/error.js"),e("common:widget/ui/ajax/ajax.js"),e("common:widget/lib/fis/event/event.js").eventCenter),d={eidEnc:"",feedbackData:{useful:{id:"",type:4,hadFeedback:!1,hasClass:"voted"},favor:{id:"",type:0,hadFeedback:!1,hasClass:"favored"}},init:function(e,t,i){if(null!==e&&""!==e&&null!==t&&""!==t){var n=this,o=n.feedbackData;o.useful.id=e,o.favor.id=t,o.favor.hadFeedback=i,n.eidEnc=F.context("eid"),a.cookie.get(n.eidEnc)&&(a.dom.addClass(o.useful.id,o.useful.hasClass),o.useful.hadFeedback=!0),n.bindEvent(o.useful),n.bindEvent(o.favor)}},bindEvent:function(e){var t=this,d=e.id,r=function(i){var o=[];o.push("method=feedback"),o.push("eidEnc="+F.context("eid")),o.push("BdStoken="+F.context("BdStoken")),o.push("bdstt="+F.context("bdstt")),o.push("type=4"),i&&o.push("isCost=1"),o=o.join("&"),s.fire("login.check",{isLogin:function(){var s=F.context("isLogin");return s?void a.ajax.post("/submit/exp",o,function(o,s){if(""!==s){var d=a.json.parse(s);if(0==d.errno){var c=a.dom.query("#vote-btn .num");if(c){var f=parseInt(c.innerHTML);c.innerHTML=f+1}if(i)return;t.hasFeedback(e)}else 2001==d.errno?n.confirm("经验提示",{info:'<div class="exp-has-used">您已对该篇经验进行了投票，再次投票需要消耗20财富值？</div>',width:300,height:120,onconfirm:function(){r(!0)}}):2040==d.errno?n.alert("经验提示",{info:'<p class="exp-tip">您的财富值不够</p>',width:300,height:120}):2041==d.errno&&n.alert("经验提示",{info:'<p class="exp-tip">您不能给自己的经验投票</p>',width:300,height:120})}}):void window.location.reload(!0)}})};a.event.on(d,"click",function(){if(e.hadFeedback||this.className.indexOf(e.hasClass)>-1,e.type){if(e.hadFeedback=!0,F.context("feedbackSuc")>=F.context("MAX_SUC_FAIL_TIMES"))return void n.alert("提示",{info:"数量已达上限",width:300,height:200});r();var t="https:"===location.protocol?"https://gss3.bdstatic.com/8LsBaXSm2Q5IlBGlnYG":"http://like.baidu.com";a.sio.callByBrowser(t+"/set?key="+F.context("eid")+"&cb=setVoteData&type=0&like=1&pid=4&index=0&sub_index=0&random="+Math.random()),window.setVoteData=function(){}}else{if(a.dom.hasClass(e.id,e.hasClass))return;var s=function(){i.exports.hasFeedback(e)};o.favor(F.context("eid"),s)}})},hasFeedback:function(e){var t=this,i=e.id,n=a.dom.query("#"+i+" .num")[0];n.innerHTML=parseInt(n.innerHTML)+1,a.dom.addClass(i,e.hasClass),e.type&&a.cookie.set(t.eidEnc,1,{path:"/"})}};i.exports=d});